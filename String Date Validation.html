<script>

function dateFormatting(dateFieldId) {
	
	var formDate = document.getElementById(dateFieldId).value;
	
	if (formDate !=="" && formDate.length > 5 && formDate.length < 11) {
		
		if (formDate.indexOf('-') > -1) {
			
			formDate = formDate.replace(/-/g,'/');
			document.getElementById(dateFieldId).value = formDate;
		}
		
		if (formDate.indexOf('.') > -1) {
			
			formDate = formDate.replace(/\./g,'/');
			document.getElementById(dateFieldId).value = formDate;
		}
		
		var yyyy = formDate.substr(formDate.length - 4, formDate.length);
		var boolVal = false;
		
		if (yyyy.indexOf('/') > -1) {
			yyyy = yyyy.substring(yyyy.length - 2, yyyy.length);
			yyyy = "20" + yyyy;
			boolVal = true;
		}
		
		var dd = formDate.substr(0, formDate.indexOf('/'));
		
		if (formDate.length == 9 && dd.length == 1 && boolVal == false) {
			var mm = formDate.substr(formDate.indexOf('/') + 1, formDate.indexOf('/', formDate.indexOf('/')) + 1);
		} else if (formDate.length == 9 && dd.length == 2 && boolVal == false) {
			var mm = formDate.substr(formDate.indexOf('/') + 1, formDate.indexOf('/', formDate.indexOf('/')));
			mm = mm.replace('/','');
		} else if (boolVal == false) {
			var mm = formDate.substr(formDate.indexOf('/') + 1, formDate.indexOf('/', formDate.indexOf('/') -1));
		} else if (formDate.length == 7 && dd.length == 1 && boolVal == true) {
			var mm = formDate.substr(formDate.indexOf('/') + 1, formDate.indexOf('/', formDate.indexOf('/')) + 1);
		} else if (formDate.length == 7 && dd.length == 2 && boolVal == true) {
			var mm = formDate.substr(formDate.indexOf('/') + 1, formDate.indexOf('/', formDate.indexOf('/')));
			mm = mm.replace('/','');
		} else if (boolVal == true) {
			var mm = formDate.substr(formDate.indexOf('/') + 1, formDate.indexOf('/', formDate.indexOf('/') -1));
		}
		
		
		var ddX = dd;
		var mmX = mm;
		var yyyyX = yyyy;
		
		if (ddX.length < 2) {ddX = "0" + dd;}
		if (mmX.length < 2) {mmX = "0" + mm;}
		if (yyyyX.length < 3) {yyyyX = "19" + yyyy;}
		
		var dateFormatted1 = ddX + "/" + mmX + "/" + yyyyX;
		
		document.getElementById(dateFieldId).value = dateFormatted1;
		
		alert(dateFormatted1);
		
		yyyy = +yyyyX;
		mm = +mmX;
		dd = +ddX;
		
		var todayDate = new Date();
		
		if (yyyy < todayDate.getFullYear()) {
			
			alert('This Date is not a valid date. Please enter a valid date.');
			var tempFieldVal = document.getElementById(dateFieldId);
			tempFieldVal.value = '';
			
		} else if (mm > 12 || mm <= 0) {
			
			alert('This Date is not a valid date. Please enter a valid date.');
			var tempFieldVal = document.getElementById(dateFieldId);
			tempFieldVal.value = '';
			
		} else if (dd > 31 || dd <= 0) {
			
			alert('This Date is not a valid date. Please enter a valid date.');
			var tempFieldVal = document.getElementById(dateFieldId);
			tempFieldVal.value = '';
			
		} else if (todayDate.getFullYear() == yyyy) {
			
			if ((todayDate.getMonth() + 1) < mm) {
				
				alert('This Date is not a valid date. Please enter a valid date.');
				var tempFieldVal = document.getElementById(dateFieldId);
				tempFieldVal.value = '';
				
			} else if ((todayDate.getMonth() + 1) == mm) {
				
				if (todayDate.getDate() > dd) {
					
					alert('This Date is not a valid date. Please enter a valid date.');
					var tempFieldVal = document.getElementById(dateFieldId);
					tempFieldVal.value = '';
					
				} else if (todayDate.getDate() < dd) {
					
					//alert('Valid Date');
					
				} else if (todayDate.getDate() == dd) {
					
					if (window.location.href.indexOf("internal") > -1) {
						
						//alert('Valid Date');
						
					} else {
						
						alert('This Date is not a valid date. Please enter a valid date.');
						var tempFieldVal = document.getElementById(dateFieldId);
						tempFieldVal.value = '';
						
					}
					
				}
				
			} else if ((todayDate.getMonth() + 1) > mm) {
				
				//alert('Valid Date');
				
			}
			
		} else if (todayDate.getFullYear() < yyyy) {
			
			//alert('Valid Date');
			
		} else {
			
			alert('This Date is not a valid date. Please enter a valid date.');
			var tempFieldVal = document.getElementById(dateFieldId);
			tempFieldVal.value = '';
			
		}
		
	} else {
		
		alert('This Date is not a valid date. Please enter a valid date.');
		var tempFieldVal = document.getElementById(dateFieldId);
		tempFieldVal.value = '';
		
	}
}


window.onload = function() {
	
	
	document.getElementById("qf195ff808a7572c76e1f3fc5d4405b5eafadf538").addEventListener("blur", function(){dateFormatting('qf195ff808a7572c76e1f3fc5d4405b5eafadf538');});
	document.getElementById("q1259b1d9a7e784a368e2fdcd483df47cca9be1c8").addEventListener("blur", function(){dateFormatting('q1259b1d9a7e784a368e2fdcd483df47cca9be1c8');});
	document.getElementById("qcb4c589867d37b972ef50327b4d7b8777c82647f").addEventListener("blur", function(){dateFormatting('qcb4c589867d37b972ef50327b4d7b8777c82647f');});
	
	
	
};

</script>
